'use strict';function cov_2owynygyfi(){var path="/home/jdufitum/nodebb-f24-pentagon/src/middleware/header.js";var hash="8eabbe1803627bc5bd968d80cc375e3c035d62aa";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/jdufitum/nodebb-f24-pentagon/src/middleware/header.js",statementMap:{"0":{start:{line:3,column:16},end:{line:3,column:37}},"1":{start:{line:4,column:16},end:{line:4,column:36}},"2":{start:{line:6,column:20},end:{line:8,column:1}},"3":{start:{line:10,column:19},end:{line:10,column:33}},"4":{start:{line:12,column:0},end:{line:15,column:3}},"5":{start:{line:13,column:1},end:{line:13,column:31}},"6":{start:{line:14,column:1},end:{line:14,column:8}},"7":{start:{line:17,column:0},end:{line:19,column:2}},"8":{start:{line:18,column:1},end:{line:18,column:31}},"9":{start:{line:22,column:1},end:{line:22,column:32}},"10":{start:{line:23,column:1},end:{line:23,column:26}},"11":{start:{line:24,column:1},end:{line:26,column:2}},"12":{start:{line:25,column:2},end:{line:25,column:52}},"13":{start:{line:28,column:1},end:{line:28,column:93}},"14":{start:{line:29,column:1},end:{line:29,column:59}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:12,column:37},end:{line:12,column:38}},loc:{start:{line:12,column:63},end:{line:15,column:1}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:30},end:{line:17,column:31}},loc:{start:{line:17,column:50},end:{line:19,column:1}},line:17},"2":{name:"doBuildHeader",decl:{start:{line:21,column:15},end:{line:21,column:28}},loc:{start:{line:21,column:39},end:{line:30,column:1}},line:21}},branchMap:{"0":{loc:{start:{line:24,column:1},end:{line:26,column:2}},type:"if",locations:[{start:{line:24,column:1},end:{line:26,column:2}},{start:{line:24,column:1},end:{line:26,column:2}}],line:24}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8eabbe1803627bc5bd968d80cc375e3c035d62aa"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2owynygyfi=function(){return actualCoverage;};}return actualCoverage;}cov_2owynygyfi();const plugins=(cov_2owynygyfi().s[0]++,require('../plugins'));const helpers=(cov_2owynygyfi().s[1]++,require('./helpers'));const controllers=(cov_2owynygyfi().s[2]++,{api:require('../controllers/api')});const middleware=(cov_2owynygyfi().s[3]++,module.exports);cov_2owynygyfi().s[4]++;middleware.buildHeader=helpers.try(async(req,res,next)=>{cov_2owynygyfi().f[0]++;cov_2owynygyfi().s[5]++;await doBuildHeader(req,res);cov_2owynygyfi().s[6]++;next();});cov_2owynygyfi().s[7]++;middleware.buildHeaderAsync=async(req,res)=>{cov_2owynygyfi().f[1]++;cov_2owynygyfi().s[8]++;await doBuildHeader(req,res);};async function doBuildHeader(req,res){cov_2owynygyfi().f[2]++;cov_2owynygyfi().s[9]++;res.locals.renderHeader=true;cov_2owynygyfi().s[10]++;res.locals.isAPI=false;cov_2owynygyfi().s[11]++;if(req.method==='GET'){cov_2owynygyfi().b[0][0]++;cov_2owynygyfi().s[12]++;await require('./index').applyCSRFasync(req,res);}else{cov_2owynygyfi().b[0][1]++;}cov_2owynygyfi().s[13]++;await plugins.hooks.fire('filter:middleware.buildHeader',{req:req,locals:res.locals});cov_2owynygyfi().s[14]++;res.locals.config=await controllers.api.loadConfig(req);}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMm93eW55Z3lmaSIsInBhdGgiLCJoYXNoIiwiZ2xvYmFsIiwiRnVuY3Rpb24iLCJnY3YiLCJjb3ZlcmFnZURhdGEiLCJzdGF0ZW1lbnRNYXAiLCJzdGFydCIsImxpbmUiLCJjb2x1bW4iLCJlbmQiLCJmbk1hcCIsIm5hbWUiLCJkZWNsIiwibG9jIiwiYnJhbmNoTWFwIiwidHlwZSIsImxvY2F0aW9ucyIsInMiLCJmIiwiYiIsIl9jb3ZlcmFnZVNjaGVtYSIsImNvdmVyYWdlIiwiYWN0dWFsQ292ZXJhZ2UiLCJwbHVnaW5zIiwicmVxdWlyZSIsImhlbHBlcnMiLCJjb250cm9sbGVycyIsImFwaSIsIm1pZGRsZXdhcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiYnVpbGRIZWFkZXIiLCJ0cnkiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZG9CdWlsZEhlYWRlciIsImJ1aWxkSGVhZGVyQXN5bmMiLCJsb2NhbHMiLCJyZW5kZXJIZWFkZXIiLCJpc0FQSSIsIm1ldGhvZCIsImFwcGx5Q1NSRmFzeW5jIiwiaG9va3MiLCJmaXJlIiwiY29uZmlnIiwibG9hZENvbmZpZyJdLCJzb3VyY2VzIjpbImhlYWRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHBsdWdpbnMgPSByZXF1aXJlKCcuLi9wbHVnaW5zJyk7XG5jb25zdCBoZWxwZXJzID0gcmVxdWlyZSgnLi9oZWxwZXJzJyk7XG5cbmNvbnN0IGNvbnRyb2xsZXJzID0ge1xuXHRhcGk6IHJlcXVpcmUoJy4uL2NvbnRyb2xsZXJzL2FwaScpLFxufTtcblxuY29uc3QgbWlkZGxld2FyZSA9IG1vZHVsZS5leHBvcnRzO1xuXG5taWRkbGV3YXJlLmJ1aWxkSGVhZGVyID0gaGVscGVycy50cnkoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG5cdGF3YWl0IGRvQnVpbGRIZWFkZXIocmVxLCByZXMpO1xuXHRuZXh0KCk7XG59KTtcblxubWlkZGxld2FyZS5idWlsZEhlYWRlckFzeW5jID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG5cdGF3YWl0IGRvQnVpbGRIZWFkZXIocmVxLCByZXMpO1xufTtcblxuYXN5bmMgZnVuY3Rpb24gZG9CdWlsZEhlYWRlcihyZXEsIHJlcykge1xuXHRyZXMubG9jYWxzLnJlbmRlckhlYWRlciA9IHRydWU7XG5cdHJlcy5sb2NhbHMuaXNBUEkgPSBmYWxzZTtcblx0aWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XG5cdFx0YXdhaXQgcmVxdWlyZSgnLi9pbmRleCcpLmFwcGx5Q1NSRmFzeW5jKHJlcSwgcmVzKTtcblx0fVxuXG5cdGF3YWl0IHBsdWdpbnMuaG9va3MuZmlyZSgnZmlsdGVyOm1pZGRsZXdhcmUuYnVpbGRIZWFkZXInLCB7IHJlcTogcmVxLCBsb2NhbHM6IHJlcy5sb2NhbHMgfSk7XG5cdHJlcy5sb2NhbHMuY29uZmlnID0gYXdhaXQgY29udHJvbGxlcnMuYXBpLmxvYWRDb25maWcocmVxKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDLFNBQUFBLGVBQUEsTUFBQUMsSUFBQSxtRUFBQUMsSUFBQSxnREFBQUMsTUFBQSxLQUFBQyxRQUFBLHNCQUFBQyxHQUFBLG9CQUFBQyxZQUFBLEVBQUFMLElBQUEsK0RBQUFNLFlBQUEsT0FBQUMsS0FBQSxFQUFBQyxJQUFBLEdBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLEdBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLEdBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLEdBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLEdBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLEdBQUFDLE1BQUEsVUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsVUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsVUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsVUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsWUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsWUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsWUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsWUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsT0FBQUUsS0FBQSxPQUFBQyxJQUFBLGlCQUFBQyxJQUFBLEVBQUFOLEtBQUEsRUFBQUMsSUFBQSxJQUFBQyxNQUFBLEtBQUFDLEdBQUEsRUFBQUYsSUFBQSxJQUFBQyxNQUFBLE1BQUFLLEdBQUEsRUFBQVAsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsS0FBQUQsSUFBQSxVQUFBSSxJQUFBLGlCQUFBQyxJQUFBLEVBQUFOLEtBQUEsRUFBQUMsSUFBQSxJQUFBQyxNQUFBLEtBQUFD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
'use strict';function cov_1c9d8gd2eb(){var path="/home/jdufitum/nodebb-f24-pentagon/src/controllers/admin/themes.js";var hash="0ca05b2db2c2638fb33871c353a71b9d8d0bd014";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/jdufitum/nodebb-f24-pentagon/src/controllers/admin/themes.js",statementMap:{"0":{start:{line:3,column:13},end:{line:3,column:28}},"1":{start:{line:4,column:11},end:{line:4,column:24}},"2":{start:{line:6,column:13},end:{line:6,column:34}},"3":{start:{line:7,column:18},end:{line:7,column:44}},"4":{start:{line:9,column:25},end:{line:9,column:39}},"5":{start:{line:11,column:30},end:{line:11,column:95}},"6":{start:{line:13,column:0},end:{line:31,column:2}},"7":{start:{line:14,column:18},end:{line:14,column:64}},"8":{start:{line:15,column:25},end:{line:15,column:58}},"9":{start:{line:18,column:1},end:{line:26,column:2}},"10":{start:{line:19,column:2},end:{line:19,column:68}},"11":{start:{line:20,column:2},end:{line:20,column:40}},"12":{start:{line:22,column:2},end:{line:24,column:3}},"13":{start:{line:23,column:3},end:{line:23,column:38}},"14":{start:{line:25,column:2},end:{line:25,column:19}},"15":{start:{line:28,column:24},end:{line:28,column:116}},"16":{start:{line:29,column:16},end:{line:29,column:49}},"17":{start:{line:30,column:1},end:{line:30,column:63}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:13,column:23},end:{line:13,column:24}},loc:{start:{line:13,column:55},end:{line:31,column:1}},line:13}},branchMap:{"0":{loc:{start:{line:22,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:24,column:3}},{start:{line:22,column:2},end:{line:24,column:3}}],line:22},"1":{loc:{start:{line:28,column:24},end:{line:28,column:116}},type:"cond-expr",locations:[{start:{line:28,column:49},end:{line:28,column:92}},{start:{line:28,column:95},end:{line:28,column:116}}],line:28},"2":{loc:{start:{line:30,column:14},end:{line:30,column:61}},type:"cond-expr",locations:[{start:{line:30,column:23},end:{line:30,column:37}},{start:{line:30,column:40},end:{line:30,column:61}}],line:30}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},f:{"0":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0ca05b2db2c2638fb33871c353a71b9d8d0bd014"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1c9d8gd2eb=function(){return actualCoverage;};}return actualCoverage;}cov_1c9d8gd2eb();const path=(cov_1c9d8gd2eb().s[0]++,require('path'));const fs=(cov_1c9d8gd2eb().s[1]++,require('fs'));const file=(cov_1c9d8gd2eb().s[2]++,require('../../file'));const{paths}=(cov_1c9d8gd2eb().s[3]++,require('../../constants'));const themesController=(cov_1c9d8gd2eb().s[4]++,module.exports);const defaultScreenshotPath=(cov_1c9d8gd2eb().s[5]++,path.join(__dirname,'../../../public/images/themes/default.png'));cov_1c9d8gd2eb().s[6]++;themesController.get=async function(req,res,next){cov_1c9d8gd2eb().f[0]++;const themeDir=(cov_1c9d8gd2eb().s[7]++,path.join(paths.nodeModules,req.params.theme));const themeConfigPath=(cov_1c9d8gd2eb().s[8]++,path.join(themeDir,'theme.json'));let themeConfig;cov_1c9d8gd2eb().s[9]++;try{cov_1c9d8gd2eb().s[10]++;themeConfig=await fs.promises.readFile(themeConfigPath,'utf8');cov_1c9d8gd2eb().s[11]++;themeConfig=JSON.parse(themeConfig);}catch(err){cov_1c9d8gd2eb().s[12]++;if(err.code==='ENOENT'){cov_1c9d8gd2eb().b[0][0]++;cov_1c9d8gd2eb().s[13]++;return next(Error('invalid-data'));}else{cov_1c9d8gd2eb().b[0][1]++;}cov_1c9d8gd2eb().s[14]++;return next(err);}const screenshotPath=(cov_1c9d8gd2eb().s[15]++,themeConfig.screenshot?(cov_1c9d8gd2eb().b[1][0]++,path.join(themeDir,themeConfig.screenshot)):(cov_1c9d8gd2eb().b[1][1]++,defaultScreenshotPath));const exists=(cov_1c9d8gd2eb().s[16]++,await file.exists(screenshotPath));cov_1c9d8gd2eb().s[17]++;res.sendFile(exists?(cov_1c9d8gd2eb().b[2][0]++,screenshotPath):(cov_1c9d8gd2eb().b[2][1]++,defaultScreenshotPath));};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWM5ZDhnZDJlYiIsInBhdGgiLCJoYXNoIiwiZ2xvYmFsIiwiRnVuY3Rpb24iLCJnY3YiLCJjb3ZlcmFnZURhdGEiLCJzdGF0ZW1lbnRNYXAiLCJzdGFydCIsImxpbmUiLCJjb2x1bW4iLCJlbmQiLCJmbk1hcCIsIm5hbWUiLCJkZWNsIiwibG9jIiwiYnJhbmNoTWFwIiwidHlwZSIsImxvY2F0aW9ucyIsInMiLCJmIiwiYiIsIl9jb3ZlcmFnZVNjaGVtYSIsImNvdmVyYWdlIiwiYWN0dWFsQ292ZXJhZ2UiLCJyZXF1aXJlIiwiZnMiLCJmaWxlIiwicGF0aHMiLCJ0aGVtZXNDb250cm9sbGVyIiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHRTY3JlZW5zaG90UGF0aCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJnZXQiLCJyZXEiLCJyZXMiLCJuZXh0IiwidGhlbWVEaXIiLCJub2RlTW9kdWxlcyIsInBhcmFtcyIsInRoZW1lIiwidGhlbWVDb25maWdQYXRoIiwidGhlbWVDb25maWciLCJwcm9taXNlcyIsInJlYWRGaWxlIiwiSlNPTiIsInBhcnNlIiwiZXJyIiwiY29kZSIsIkVycm9yIiwic2NyZWVuc2hvdFBhdGgiLCJzY3JlZW5zaG90IiwiZXhpc3RzIiwic2VuZEZpbGUiXSwic291cmNlcyI6WyJ0aGVtZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5jb25zdCBmaWxlID0gcmVxdWlyZSgnLi4vLi4vZmlsZScpO1xuY29uc3QgeyBwYXRocyB9ID0gcmVxdWlyZSgnLi4vLi4vY29uc3RhbnRzJyk7XG5cbmNvbnN0IHRoZW1lc0NvbnRyb2xsZXIgPSBtb2R1bGUuZXhwb3J0cztcblxuY29uc3QgZGVmYXVsdFNjcmVlbnNob3RQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uLy4uLy4uL3B1YmxpYy9pbWFnZXMvdGhlbWVzL2RlZmF1bHQucG5nJyk7XG5cbnRoZW1lc0NvbnRyb2xsZXIuZ2V0ID0gYXN5bmMgZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XG5cdGNvbnN0IHRoZW1lRGlyID0gcGF0aC5qb2luKHBhdGhzLm5vZGVNb2R1bGVzLCByZXEucGFyYW1zLnRoZW1lKTtcblx0Y29uc3QgdGhlbWVDb25maWdQYXRoID0gcGF0aC5qb2luKHRoZW1lRGlyLCAndGhlbWUuanNvbicpO1xuXG5cdGxldCB0aGVtZUNvbmZpZztcblx0dHJ5IHtcblx0XHR0aGVtZUNvbmZpZyA9IGF3YWl0IGZzLnByb21pc2VzLnJlYWRGaWxlKHRoZW1lQ29uZmlnUGF0aCwgJ3V0ZjgnKTtcblx0XHR0aGVtZUNvbmZpZyA9IEpTT04ucGFyc2UodGhlbWVDb25maWcpO1xuXHR9IGNhdGNoIChlcnIpIHtcblx0XHRpZiAoZXJyLmNvZGUgPT09ICdFTk9FTlQnKSB7XG5cdFx0XHRyZXR1cm4gbmV4dChFcnJvcignaW52YWxpZC1kYXRhJykpO1xuXHRcdH1cblx0XHRyZXR1cm4gbmV4dChlcnIpO1xuXHR9XG5cblx0Y29uc3Qgc2NyZWVuc2hvdFBhdGggPSB0aGVtZUNvbmZpZy5zY3JlZW5zaG90ID8gcGF0aC5qb2luKHRoZW1lRGlyLCB0aGVtZUNvbmZpZy5zY3JlZW5zaG90KSA6IGRlZmF1bHRTY3JlZW5zaG90UGF0aDtcblx0Y29uc3QgZXhpc3RzID0gYXdhaXQgZmlsZS5leGlzdHMoc2NyZWVuc2hvdFBhdGgpO1xuXHRyZXMuc2VuZEZpbGUoZXhpc3RzID8gc2NyZWVuc2hvdFBhdGggOiBkZWZhdWx0U2NyZWVuc2hvdFBhdGgpO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDLFNBQUFBLGVBQUEsTUFBQUMsSUFBQSwwRUFBQUMsSUFBQSxnREFBQUMsTUFBQSxLQUFBQyxRQUFBLHNCQUFBQyxHQUFBLG9CQUFBQyxZQUFBLEVBQUFMLElBQUEsc0VBQUFNLFlBQUEsT0FBQUMsS0FBQSxFQUFBQyxJQUFBLEdBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLEdBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLEdBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLEdBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLEdBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLEdBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLEdBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLEdBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLEdBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLEdBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsVUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsWUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsWUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsV0FBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsWUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsWUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsYUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsWUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsT0FBQUUsS0FBQSxPQUFBQyxJQUFBLGlCQUFBQyxJQUFBLEVBQUFOLEtBQUEsRUFBQUMsSUFBQSxJQUFBQyxNQUFBLEtBQUFDLEdBQUEsRUFBQUYsSUFBQSxJQUFBQyxNQUFBLE1BQUFLLEdBQUEsRUFBQVAsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsS0FBQUQsSUFBQSxNQUFBTyxTQUFBLE9BQUFELEdBQUEsRUFBQVAsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsS0FBQU8sSUFBQSxNQUFBQyxTQUFBLEdBQUFWLEtBQUEsRUFBQUMsSUFBQSxJQUFBQyxNQUFBLElBQUFDLEdBQUEsRUFBQUYsSUFBQSxJQUFBQyxNQUFBLE1BQUFGLEtBQUEsRUFBQUMsSUFBQSxJQUFBQyxNQUFBLElBQUFDLEdBQUEsRUFBQUYsSUFBQSxJQUFBQyxNQUFBLE1BQUFELElBQUEsVUFBQU0sR0FBQSxFQUFBUCxLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxPQUFBTyxJQUFBLGFBQUFDLFNBQUEsR0FBQVYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsT0FBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsS0FB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